<script setup>
import SearchBox from './components/SearchBox.vue'
import LocalTime from './components/LocalTime.vue'
import CategoryList from './components/CategoryNav.vue'
import { useSettingStore } from '@/stores/settingStore';
import { ref } from 'vue';

const settingStore = useSettingStore();
const isShowSpan = ref(true);
</script>

<template>
    <!-- 背景图片 -->
    <img :src=settingStore.settingList[3].backgroundFullPath alt="" class="appBackground" :style="{ filter: 'blur('+settingStore.settingList[3].shelterBackgroundBlur+'px)' }">
    <!-- 控制背景透明  -->
    <div class="shelterBackground" :style="{ opacity: settingStore.settingList[3].shelterBackgroundOpacity + '%'}"></div>
    <!-- 左侧导航 -->
    <CategoryList></CategoryList>
    <!-- 控制当前模式 -->
    <div class="placeholder">
        <div :class="{ hiddenSpan: isShowSpan }" @mouseout="isShowSpan = true" @mouseover="isShowSpan = false">
            <span title="极简模式" @click="settingStore.enterSimplePattern" v-show="!settingStore.settingList[4].isSimplePattern">
                <svg t="1713693814989" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4281" width="30" height="30"><path d="M659.413333 65.088a64 64 0 0 1 56.874667 93.312l-106.133333 206.08h211.626666a64 64 0 0 1 45.909334 108.629333L422.122667 931.328a64 64 0 0 1-108.544-57.664l53.546666-257.066667h-95.296a64 64 0 0 1-62.08-79.530666l105.877334-423.488a64 64 0 0 1 62.08-48.490667H659.413333z" p-id="4282" fill="#cdcdcd"></path></svg>
            </span>
            <span title="组件模式" @click="settingStore.enterComponent" v-show="settingStore.settingList[4].isSimplePattern">
                <svg t="1713694485609" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5480" width="30" height="30"><path d="M972.09863 1016.986301H259.506849c-19.638356 0-35.068493-15.430137-35.068493-35.068493V768.70137c-8.416438 5.610959-18.235616 9.819178-28.054794 12.624657h-1.40274c-12.624658 4.208219-26.652055 5.610959-39.276712 5.610959-77.150685 0-138.871233-63.123288-138.871233-138.871233 0-77.150685 63.123288-138.871233 138.871233-138.871232 14.027397 0 28.054795 2.805479 42.082191 7.013698 1.40274 0 2.805479 1.40274 4.20822 1.40274 7.013699 2.805479 14.027397 5.610959 19.638356 8.416438l2.805479 1.40274V269.326027c0-19.638356 15.430137-35.068493 35.068493-35.068493h228.646576l-4.20822-8.416438c-7.013699-11.221918-12.624658-22.443836-15.430137-35.068493v-1.40274c-4.208219-12.624658-5.610959-26.652055-5.610958-39.276712C462.90411 72.942466 526.027397 11.221918 601.775342 11.221918c77.150685 0 138.871233 63.123288 138.871233 138.871233 0 14.027397-2.805479 28.054795-7.013698 42.082191 0 1.40274-1.40274 2.805479-1.40274 4.20822-2.805479 7.013699-5.610959 14.027397-8.416438 19.638356l-7.013699 16.832877h255.29863c19.638356 0 35.068493 15.430137 35.068493 35.068493v314.213698c0 11.221918-5.610959 22.443836-15.430137 29.457535-9.819178 7.013699-22.443836 7.013699-33.665753 2.805479L897.753425 587.747945c-1.40274 0-1.40274-1.40274-2.80548-1.40274-2.805479-1.40274-7.013699-4.208219-11.221918-5.610958h-1.402739c-7.013699-2.805479-14.027397-2.805479-21.041096-2.80548-37.873973 0-68.734247 30.860274-68.734247 68.734247s30.860274 68.734247 68.734247 68.734246c7.013699 0 14.027397-1.40274 19.638356-2.805479 7.013699-1.40274 12.624658-5.610959 18.235616-8.416439 1.40274-1.40274 2.805479-1.40274 4.20822-2.805479l53.304109-25.249315c11.221918-5.610959 23.846575-4.208219 33.665754 1.40274s16.832877 18.235616 16.832876 29.457534V981.917808c0 19.638356-15.430137 35.068493-35.068493 35.068493z m-677.523288-70.136986h642.454795v-182.356164h-1.40274c-11.221918 7.013699-22.443836 12.624658-35.068493 16.832876h-1.40274c-12.624658 4.208219-26.652055 5.610959-39.276712 5.610959-77.150685 0-138.871233-63.123288-138.871233-138.871233 0-77.150685 63.123288-138.871233 138.871233-138.871232 14.027397 0 28.054795 2.805479 42.082192 7.013698 1.40274 0 2.805479 1.40274 4.208219 1.40274 7.013699 2.805479 14.027397 5.610959 19.638356 8.416438l9.819178 4.208219v-224.438356H662.093151c-11.221918 0-22.443836-5.610959-29.457535-15.430137-7.013699-9.819178-7.013699-22.443836-2.805479-33.665753l29.457534-67.331507c0-1.40274 1.40274-1.40274 1.40274-2.805479 1.40274-2.805479 4.208219-7.013699 5.610959-11.221918v-1.40274c2.805479-7.013699 2.805479-14.027397 2.805479-21.041096 0-37.873973-30.860274-68.734247-68.734246-68.734246s-68.734247 30.860274-68.734247 68.734246c0 7.013699 1.40274 14.027397 2.80548 19.638356 1.40274 7.013699 5.610959 12.624658 8.416438 18.235617 1.40274 1.40274 1.40274 2.805479 2.805479 4.208219l28.054795 60.317808c5.610959 11.221918 4.208219 23.846575-1.40274 33.665754s-18.235616 16.832877-29.457534 16.832876H294.575342v274.936987c0 11.221918-5.610959 22.443836-15.430137 29.457534-9.819178 7.013699-22.443836 7.013699-33.665753 2.805479L192.175342 589.150685c-1.40274 0-1.40274-1.40274-2.805479-1.40274-2.805479-1.40274-7.013699-4.208219-11.221918-5.610959h-1.40274c-7.013699-2.805479-14.027397-2.805479-21.041095-2.805479-37.873973 0-68.734247 30.860274-68.734247 68.734246s30.860274 68.734247 68.734247 68.734247c7.013699 0 14.027397-1.40274 19.638356-2.805479 7.013699-1.40274 12.624658-5.610959 18.235616-8.416439 1.40274-1.40274 2.805479-1.40274 4.208219-2.805479l46.290411-22.443836c11.221918-5.610959 23.846575-4.208219 33.665754 1.40274 9.819178 7.013699 16.832877 18.235616 16.832876 29.457534v235.660274z" fill="#bfbfbf" p-id="5481"></path></svg>
            </span>
        </div>
    </div>
    <!-- 占位元素 -->
    <div :style="{ height: settingStore.settingList[4].placeholder + 'px'}"></div>
    <!-- 时间 -->
    <LocalTime></LocalTime>
    <!-- 搜索框 -->
    <SearchBox></SearchBox>
    <!-- 二级路由出口视图 -->
    <RouterView />
</template>

<style scoped>
.appBackground{
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: -99;
}
.shelterBackground{
  background-color: black;
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: -98;
}
.placeholder{
    height: 100px;
    width: 100%;
    position: relative;
}
.placeholder div{
    height: 100px;
    width: 300px;
    display: flex;
    align-items: center;
    justify-content: space-around;
    position: absolute;
    right: 200px;
    top: 50%;
}
.placeholder div span{
    display: block;
    height: 40px;
    width: 40px;
    display: flex;
    align-items: center;
    justify-content: space-around;
    opacity: 0.5;
    border-radius: 10px;
    cursor: pointer;
    background-color: rgba(28, 28, 30, 0.5);
}
.hiddenSpan{
    opacity: 0;
}
</style>